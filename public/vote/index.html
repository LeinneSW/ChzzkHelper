<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>채팅 투표/추첨기</title>
    <script src="./js/event.js"></script>
    <script src="./js/socket.js"></script>
    <link rel="stylesheet" href="./css/default.css">
    <link rel="stylesheet" href="./css/chatting.css">
    <link rel="stylesheet" href="./css/user-list.css">
    <link rel="stylesheet" href="./css/vote-list.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body onload="connect()">
    <div class="d-flex flex-column h-100">
        <header>
            <div class="px-3 py-2 border-bottom">
                <div class="container">
                    <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                        <a href="../index.html" class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
                            <img width="60" height="60" src="../img/chzzk.png">
                        </a>
                        <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">
                            <li>
                                <a href="/vote/" class="nav-link text-secondary disabled">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-heart-fill d-block mx-auto mb-1" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                                    </svg>
                                    투표/추첨기
                                </a>
                            </li>
                            <li>
                                <a href="../alert/guide.html" class="nav-link text-black">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-bell d-block mx-auto mb-1" viewBox="0 0 16 16">
                                        <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6"/>
                                    </svg>
                                    알림이
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>
        <div class="d-flex flex-1" style="overflow: hidden;">
            <div id="user-container" class="d-flex flex-column bg-body-tertiary border-right">
                <div class="border-bottom text-center p-3">
                    <span id="user-current-count">0명</span>
                    <span id="user-total-count">(총 0명)</span>
                </div>
                <div id="user-list" class="flex-1"></div>
                <button class="btn btn-primary" style="height: 70px;" onclick="selectRandomUser()">추첨</button>
            </div>
            <div id="vote-container" class="d-flex flex-column flex-1">
                <div class="title p-3 border-bottom">투표</div>
                <div class="d-flex gap-3 w-100 p-3">
                    <button id="startBtn" class="btn btn-success btn-lg flex-1" onclick="startVote(event)">시작</button>
                    <button id="endBtn" class="btn btn-danger btn-lg flex-1" onclick="endVote(event)" disabled>마감</button>
                </div>
                <div class="d-flex w-auto p-3 pt-0 border-bottom">
                    <div style="flex: 1">득표 현황</div>
                    <button id="hideBtn" class="btn btn-secondary btn-sm" onclick="changeCountVisibility(event)">숨기기</button>
                </div>
                <ol id="vote-item-list">
                    <li onclick="this.children[0].focus()">
                        <input type="text" placeholder="새 항목 추가" onfocusout="focusEvent(event)" onkeypress="event.keyCode === 13 && addVoteItem(this)" spellcheck="false">
                        <span></span>
                    </li>
                </ol>
            </div>
            <div id="chatting-container" class="d-flex flex-column flex-1 border-left bg-body-tertiary">
                <div class="title text-center p-3 border-bottom">방송 채팅</div>
                <div id="chatting-context-container"></div>
                <div id="chatting-input-container">
                    <input id="chatting-input" class="flex-1 form-control" type="text" placeholder="채팅을 입력해주세요" onkeypress="event.keyCode === 13 && sendChat(this)" spellcheck="false">
                    <button class="btn btn-dark btn-sm" onclick="sendChat()">전송</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>